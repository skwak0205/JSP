DROP SEQUENCE MYNOSEQ;
DROP TABLE MYMEMBER;

CREATE  SEQUENCE MYNOSEQ;

-- 번호, 아이디, 비밀번호, 이름, 주소, 전화번호
-- 이메일, 가입여부(Y:가입/N:탈퇴), 등급(ADMIN,USER,...)
CREATE TABLE MYMEMBER(
	MYNO NUMBER NOT NULL,
	MYID VARCHAR2(1000) NOT NULL,
	MYPW VARCHAR2(1000) NOT NULL,
	MYNAME VARCHAR2(500) NOT NULL,
	MYADDR VARCHAR2(2000) NOT NULL,
	MYPHONE VARCHAR2(20) NOT NULL,
	MYEMAIL VARCHAR2(100) NOT NULL,
	MYENABLED VARCHAR2(2) NOT NULL,
	MYROLE VARCHAR2(200) NOT NULL,
	-- MYNO에 기본키
	CONSTRAINT MYMEMBER_MYNO_PK PRIMARY KEY (MYNO),
	-- MYID에 UNIQUE
	CONSTRAINT MYMEMBER_MYID_UQ UNIQUE (MYID),
	-- MYPHONE에 UNIQUE
	CONSTRAINT MYMEMBER_MYPHONE_UQ UNIQUE (MYPHONE),
	-- MYEMAIL에 UNIQUE
	CONSTRAINT MYMEMBER_MYEMAIL_UQ UNIQUE (MYEMAIL),
	-- MYENABLED에 Y / N 만 (CHECK)
	CONSTRAINT MYMEMBER_MYENABLED_CHK CHECK (MYENABLED IN ('Y', 'N'))
);

INSERT INTO MYMEMBER
VALUES (MYNOSEQ.NEXTVAL, 'admin', 'admin1234', '관리자', '서울시 강남구', '010-0000-0000', 'ADMIN@ADMIN.COM', 'Y', 'ADMIN');

SELECT MYNO, MYID, MYPW, MYNAME, MYADDR, MYPHONE, MYEMAIL, MYENABLED, MYROLE
FROM MYMEMBER
ORDER BY MYNO;

SELECT MYNO, MYID, MYPW, MYNAME, MYADDR, MYPHONE, MYEMAIL, MYENABLED, MYROLE 
FROM MYMEMBER 
WHERE MYENABLED = 'Y';

UPDATE MYMEMBER SET MYROLE = 'ADMIN' WHERE MYID = 'admin';